<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invioce</title>
    <link rel="stylesheet" href="Style.css" />
</head>
<body>
    <nav>
        <img src="Images/logo.jpg" alt="Company Logo" class="Logo" />
        <div>
            <div>
                <a href="Home.html">HOME</a>
                <a href="Login.html">LOGIN</a>
                <a href="Services and Rate.html">SERVICES/RATE</a>
                <a href="Invoice.html">INVOICE</a>
                <a href="AboutUs.html">ABOUT US</a>
              </div>
    </nav>
    <div id="Invoice">
        <img src="Images/logo.jpg" alt="Company Logo" class="Logo" />
        <div>
        </section>

        <section class="company-details">
            <div>
                <h2>From:</h2>
                <p >AQUA CARE PLUS</p>
                <p >kingston, Jamaica</p>
                <p >Tel: (876) 351-2761</p>
                <p>Email: maragodbless@gmail.com</p>
            </div>
            <div>
                <h2>To:</h2>
                <p id="client-name"></p>
                <p id="client-address"></p>
                <p id="client-email"></p>
            </div>
        </section>


        <section class="invoice-details">
            <table id="invoice-table">
                <thead>
                    <tr>
                        <th>Description</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dynamically filled by JavaScript -->
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3">Subtotal</td>
                        <td id="subtotal"></td>
                    </tr>
                    <tr>
                        <td colspan="3">Tax (10%)</td>
                        <td id="tax"></td>
                    </tr>
                    <tr>
                        <td colspan="3"><strong>Total</strong></td>
                        <td id="total"></td>
                    </tr>
                </tfoot>
            </table>
        </section>

        <footer>
            <p>Thank you for using AquaCarePlus!</p>
        </footer>
    </div>

    <script src="app.js"></script>
    

            
    
    <!-- {
        package: package, 
        full_name: PACKAGE[package].full_name, 
        price: PACKAGE[package].price,
        quantity: quantity_input.value
      } -->
<script>
    
    console.log(localStorage);

    function refreshInvoice(){    
        const cartTableBody = document.querySelector("#Invoice tbody")
        
        let subtotal = 0;
        let TAX_RATE = 0.1;
        let total = 0;

        let userCart = JSON.parse(localStorage.getItem("user")).cart;
        if (!userCart) {
          userCart = [];
        }

        userCart.forEach(item  =>{
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${item.full_name}</td>  
            <td>${item.quantity}</td>
            <td>\$${item.price}</td>
            <td>\$${item.price*item.quantity}</td>
          `;
          subtotal += item.price * item.quantity;
          cartTableBody.append(row);
        });

        document.querySelector("#Invoice #subtotal").innerHTML = `\$${subtotal}`;
        document.querySelector("#Invoice #tax").innerHTML = `\$${subtotal * TAX_RATE}`;
        document.querySelector("#Invoice #total").innerHTML = `\$${subtotal + (subtotal * TAX_RATE)}`;

      };  

      refreshInvoice();
</script>
</body>
</html>